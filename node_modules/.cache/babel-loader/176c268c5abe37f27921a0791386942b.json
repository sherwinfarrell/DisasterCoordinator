{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Leaflet_module = window.L ? window.L : require(\"leaflet\");\n\nvar Drift_Marker =\n/** @class */\nfunction (_super) {\n  __extends(Drift_Marker, _super);\n\n  function Drift_Marker() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._slideToUntil = 0;\n    _this._slideToDuration = 1000;\n    _this._slideToLatLng = [0, 0];\n    _this._slideFromLatLng = [0, 0];\n    _this._slideKeepAtCenter = false;\n    _this._slideDraggingWasAllowed = false;\n    _this._slideFrame = 0;\n\n    _this.addInitHook = function () {\n      _this.on('move', _this.slideCancel, _this);\n    }; // üçÇmethod slideTo(latlng: LatLng, options: Slide Options): this\n    // Moves this marker until `latlng`, like `setLatLng()`, but with a smooth\n    // sliding animation. Fires `movestart` and `moveend` events.\n\n\n    _this.slideTo = function (latlng, options) {\n      if (!_this._map) return;\n      _this._slideToDuration = options.duration;\n      _this._slideToUntil = performance.now() + options.duration;\n      _this._slideFromLatLng = _this.getLatLng();\n      _this._slideToLatLng = latlng;\n      _this._slideKeepAtCenter = !!options.keepAtCenter;\n      _this._slideDraggingWasAllowed = _this._slideDraggingWasAllowed !== undefined ? _this._slideDraggingWasAllowed : _this._map.dragging.enabled();\n\n      if (_this._slideKeepAtCenter) {\n        _this._map.dragging.disable();\n\n        _this._map.doubleClickZoom.disable();\n\n        _this._map.options.touchZoom = 'center';\n        _this._map.options.scrollWheelZoom = 'center';\n      }\n\n      _this.fire('movestart');\n\n      _this._slideTo();\n\n      return _this;\n    };\n\n    _this._slideTo = function () {\n      if (!_this._map) return;\n      var remaining = _this._slideToUntil - performance.now();\n\n      if (remaining < 0) {\n        _this.setLatLng(_this._slideToLatLng);\n\n        _this.fire('moveend');\n\n        if (_this._slideDraggingWasAllowed) {\n          _this._map.dragging.enable();\n\n          _this._map.doubleClickZoom.enable();\n\n          _this._map.options.touchZoom = true;\n          _this._map.options.scrollWheelZoom = true;\n        }\n\n        _this._slideDraggingWasAllowed = false;\n        return _this;\n      }\n\n      var startPoint = _this._map.latLngToContainerPoint(_this._slideFromLatLng);\n\n      var endPoint = _this._map.latLngToContainerPoint(_this._slideToLatLng);\n\n      var percentDone = (_this._slideToDuration - remaining) / _this._slideToDuration;\n      var currPoint = endPoint.multiplyBy(percentDone).add(startPoint.multiplyBy(1 - percentDone));\n\n      var currLatLng = _this._map.containerPointToLatLng(currPoint);\n\n      _this.setLatLng(currLatLng);\n\n      if (_this._slideKeepAtCenter) {\n        _this._map.panTo(currLatLng, {\n          animate: false\n        });\n      }\n\n      _this._slideFrame = Leaflet_module.Util.requestAnimFrame(_this._slideTo, _this);\n    };\n\n    return _this;\n  } // üçÇmethod slideCancel(): this\n  // Cancels the sliding animation from `slideTo`, if applicable.\n\n\n  Drift_Marker.prototype.slideCancel = function () {\n    Leaflet_module.Util.cancelAnimFrame(this._slideFrame);\n  };\n\n  return Drift_Marker;\n}(Leaflet_module.Marker);\n\nwindow.Drift_Marker = Drift_Marker;\nexports.default = Drift_Marker;","map":{"version":3,"sources":["../../src/DriftMarker/Drift_Marker.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Leaflet_module = window.L ? window.L : require(\"leaflet\");\r\nvar Drift_Marker = /** @class */ (function (_super) {\r\n    __extends(Drift_Marker, _super);\r\n    function Drift_Marker() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._slideToUntil = 0;\r\n        _this._slideToDuration = 1000;\r\n        _this._slideToLatLng = [0, 0];\r\n        _this._slideFromLatLng = [0, 0];\r\n        _this._slideKeepAtCenter = false;\r\n        _this._slideDraggingWasAllowed = false;\r\n        _this._slideFrame = 0;\r\n        _this.addInitHook = function () {\r\n            _this.on('move', _this.slideCancel, _this);\r\n        };\r\n        // üçÇmethod slideTo(latlng: LatLng, options: Slide Options): this\r\n        // Moves this marker until `latlng`, like `setLatLng()`, but with a smooth\r\n        // sliding animation. Fires `movestart` and `moveend` events.\r\n        _this.slideTo = function (latlng, options) {\r\n            if (!_this._map)\r\n                return;\r\n            _this._slideToDuration = options.duration;\r\n            _this._slideToUntil = performance.now() + options.duration;\r\n            _this._slideFromLatLng = _this.getLatLng();\r\n            _this._slideToLatLng = latlng;\r\n            _this._slideKeepAtCenter = !!options.keepAtCenter;\r\n            _this._slideDraggingWasAllowed =\r\n                _this._slideDraggingWasAllowed !== undefined ?\r\n                    _this._slideDraggingWasAllowed :\r\n                    _this._map.dragging.enabled();\r\n            if (_this._slideKeepAtCenter) {\r\n                _this._map.dragging.disable();\r\n                _this._map.doubleClickZoom.disable();\r\n                _this._map.options.touchZoom = 'center';\r\n                _this._map.options.scrollWheelZoom = 'center';\r\n            }\r\n            _this.fire('movestart');\r\n            _this._slideTo();\r\n            return _this;\r\n        };\r\n        _this._slideTo = function () {\r\n            if (!_this._map)\r\n                return;\r\n            var remaining = _this._slideToUntil - performance.now();\r\n            if (remaining < 0) {\r\n                _this.setLatLng(_this._slideToLatLng);\r\n                _this.fire('moveend');\r\n                if (_this._slideDraggingWasAllowed) {\r\n                    _this._map.dragging.enable();\r\n                    _this._map.doubleClickZoom.enable();\r\n                    _this._map.options.touchZoom = true;\r\n                    _this._map.options.scrollWheelZoom = true;\r\n                }\r\n                _this._slideDraggingWasAllowed = false;\r\n                return _this;\r\n            }\r\n            var startPoint = _this._map.latLngToContainerPoint(_this._slideFromLatLng);\r\n            var endPoint = _this._map.latLngToContainerPoint(_this._slideToLatLng);\r\n            var percentDone = (_this._slideToDuration - remaining) / _this._slideToDuration;\r\n            var currPoint = endPoint.multiplyBy(percentDone).add(startPoint.multiplyBy(1 - percentDone));\r\n            var currLatLng = _this._map.containerPointToLatLng(currPoint);\r\n            _this.setLatLng(currLatLng);\r\n            if (_this._slideKeepAtCenter) {\r\n                _this._map.panTo(currLatLng, { animate: false });\r\n            }\r\n            _this._slideFrame = Leaflet_module.Util.requestAnimFrame(_this._slideTo, _this);\r\n        };\r\n        return _this;\r\n    }\r\n    // üçÇmethod slideCancel(): this\r\n    // Cancels the sliding animation from `slideTo`, if applicable.\r\n    Drift_Marker.prototype.slideCancel = function () {\r\n        Leaflet_module.Util.cancelAnimFrame(this._slideFrame);\r\n    };\r\n    return Drift_Marker;\r\n}(Leaflet_module.Marker));\r\nwindow.Drift_Marker = Drift_Marker;\r\nexports.default = Drift_Marker;\r\n//# sourceMappingURL=Drift_Marker.js.map"]},"metadata":{},"sourceType":"script"}