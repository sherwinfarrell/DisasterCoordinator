{"ast":null,"code":"import L from\"leaflet\";L.AnimatedMarker=L.Marker.extend({options:{// meters\ndistance:200,// ms\ninterval:1000,// animate on add?\nautoStart:true,// callback onend\nonEnd:function onEnd(){},clickable:false},initialize:function initialize(latlngs,options){this.setLine(latlngs);L.Marker.prototype.initialize.call(this,latlngs[0],options);},// Breaks the line up into tiny chunks (see options) ONLY if CSS3 animations\n// are not supported.\n_chunk:function _chunk(latlngs){var i,len=latlngs.length,chunkedLatLngs=[];for(i=1;i<len;i++){var cur=latlngs[i-1],next=latlngs[i],dist=cur.distanceTo(next),factor=this.options.distance/dist,dLat=factor*(next.lat-cur.lat),dLng=factor*(next.lng-cur.lng);if(dist>this.options.distance){while(dist>this.options.distance){cur=new L.LatLng(cur.lat+dLat,cur.lng+dLng);dist=cur.distanceTo(next);chunkedLatLngs.push(cur);}}else{chunkedLatLngs.push(cur);}}chunkedLatLngs.push(latlngs[len-1]);return chunkedLatLngs;},onAdd:function onAdd(map){L.Marker.prototype.onAdd.call(this,map);// Start animating when added to the map\nif(this.options.autoStart){this.start();}},animate:function animate(){var self=this,len=this._latlngs.length,speed=this.options.interval;// Normalize the transition speed from vertex to vertex\nif(this._i<len&&this._i>0){speed=this._latlngs[this._i-1].distanceTo(this._latlngs[this._i])/this.options.distance*this.options.interval;}// Only if CSS3 transitions are supported\nif(L.DomUtil.TRANSITION){if(this._icon){this._icon.style[L.DomUtil.TRANSITION]='all '+speed+'ms linear';}if(this._shadow){this._shadow.style[L.DomUtil.TRANSITION]='all '+speed+'ms linear';}}// Move to the next vertex\nthis.setLatLng(this._latlngs[this._i]);this._i++;// Queue up the animation to the next next vertex\nthis._tid=setTimeout(function(){if(self._i===len){self.options.onEnd.apply(self,Array.prototype.slice.call(arguments));}else{self.animate();}},speed);},// Start the animation\nstart:function start(){this.animate();},// Stop the animation in place\nstop:function stop(){if(this._tid){clearTimeout(this._tid);}},setLine:function setLine(latlngs){if(L.DomUtil.TRANSITION){// No need to to check up the line if we can animate using CSS3\nthis._latlngs=latlngs;}else{// Chunk up the lines into options.distance bits\nthis._latlngs=this._chunk(latlngs);this.options.distance=10;this.options.interval=30;}this._i=0;}});L.animatedMarker=function(latlngs,options){return new L.AnimatedMarker(latlngs,options);};export default L.animatedMarker;","map":{"version":3,"sources":["C:/Users/sherwin/projects/ASE Project/LatestClientCoordinator/disastercoordinatorwebview/src/components/Mapping/AnimatedMarker.js"],"names":["L","AnimatedMarker","Marker","extend","options","distance","interval","autoStart","onEnd","clickable","initialize","latlngs","setLine","prototype","call","_chunk","i","len","length","chunkedLatLngs","cur","next","dist","distanceTo","factor","dLat","lat","dLng","lng","LatLng","push","onAdd","map","start","animate","self","_latlngs","speed","_i","DomUtil","TRANSITION","_icon","style","_shadow","setLatLng","_tid","setTimeout","apply","Array","slice","arguments","stop","clearTimeout","animatedMarker"],"mappings":"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","sourcesContent":["import L from \"leaflet\"\r\n\r\nL.AnimatedMarker = L.Marker.extend({\r\n    options: {\r\n      // meters\r\n      distance: 200,\r\n      // ms\r\n      interval: 1000,\r\n      // animate on add?\r\n      autoStart: true,\r\n      // callback onend\r\n      onEnd: function(){},\r\n      clickable: false\r\n    },\r\n  \r\n    initialize: function (latlngs, options) {\r\n      this.setLine(latlngs);\r\n      L.Marker.prototype.initialize.call(this, latlngs[0], options);\r\n    },\r\n  \r\n    // Breaks the line up into tiny chunks (see options) ONLY if CSS3 animations\r\n    // are not supported.\r\n    _chunk: function(latlngs) {\r\n      var i,\r\n          len = latlngs.length,\r\n          chunkedLatLngs = [];\r\n  \r\n      for (i=1;i<len;i++) {\r\n        var cur = latlngs[i-1],\r\n            next = latlngs[i],\r\n            dist = cur.distanceTo(next),\r\n            factor = this.options.distance / dist,\r\n            dLat = factor * (next.lat - cur.lat),\r\n            dLng = factor * (next.lng - cur.lng);\r\n  \r\n        if (dist > this.options.distance) {\r\n          while (dist > this.options.distance) {\r\n            cur = new L.LatLng(cur.lat + dLat, cur.lng + dLng);\r\n            dist = cur.distanceTo(next);\r\n            chunkedLatLngs.push(cur);\r\n          }\r\n        } else {\r\n          chunkedLatLngs.push(cur);\r\n        }\r\n      }\r\n      chunkedLatLngs.push(latlngs[len-1]);\r\n  \r\n      return chunkedLatLngs;\r\n    },\r\n  \r\n    onAdd: function (map) {\r\n      L.Marker.prototype.onAdd.call(this, map);\r\n  \r\n      // Start animating when added to the map\r\n      if (this.options.autoStart) {\r\n        this.start();\r\n      }\r\n    },\r\n  \r\n    animate: function() {\r\n      var self = this,\r\n          len = this._latlngs.length,\r\n          speed = this.options.interval;\r\n  \r\n      // Normalize the transition speed from vertex to vertex\r\n      if (this._i < len && this._i > 0) {\r\n        speed = this._latlngs[this._i-1].distanceTo(this._latlngs[this._i]) / this.options.distance * this.options.interval;\r\n      }\r\n  \r\n      // Only if CSS3 transitions are supported\r\n      if (L.DomUtil.TRANSITION) {\r\n        if (this._icon) { this._icon.style[L.DomUtil.TRANSITION] = ('all ' + speed + 'ms linear'); }\r\n        if (this._shadow) { this._shadow.style[L.DomUtil.TRANSITION] = 'all ' + speed + 'ms linear'; }\r\n      }\r\n  \r\n      // Move to the next vertex\r\n      this.setLatLng(this._latlngs[this._i]);\r\n      this._i++;\r\n  \r\n      // Queue up the animation to the next next vertex\r\n      this._tid = setTimeout(function(){\r\n        if (self._i === len) {\r\n          self.options.onEnd.apply(self, Array.prototype.slice.call(arguments));\r\n        } else {\r\n          self.animate();\r\n        }\r\n      }, speed);\r\n    },\r\n  \r\n    // Start the animation\r\n    start: function() {\r\n      this.animate();\r\n    },\r\n  \r\n    // Stop the animation in place\r\n    stop: function() {\r\n      if (this._tid) {\r\n        clearTimeout(this._tid);\r\n      }\r\n    },\r\n  \r\n    setLine: function(latlngs){\r\n      if (L.DomUtil.TRANSITION) {\r\n        // No need to to check up the line if we can animate using CSS3\r\n        this._latlngs = latlngs;\r\n      } else {\r\n        // Chunk up the lines into options.distance bits\r\n        this._latlngs = this._chunk(latlngs);\r\n        this.options.distance = 10;\r\n        this.options.interval = 30;\r\n      }\r\n      this._i = 0;\r\n    }\r\n  \r\n  });\r\n  \r\n  L.animatedMarker = function (latlngs, options) {\r\n    return new L.AnimatedMarker(latlngs, options);\r\n  };\r\n\r\n\r\n  export default L.animatedMarker;"]},"metadata":{},"sourceType":"module"}