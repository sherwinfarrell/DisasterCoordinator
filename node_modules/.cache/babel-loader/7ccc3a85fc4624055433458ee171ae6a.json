{"ast":null,"code":"import _slicedToArray from\"C:/Users/sherwin/projects/ASE Project/LatestClientCoordinator/disastercoordinatorwebview/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback,useRef}from'react';import{Map,TileLayer,FeatureGroup}from'react-leaflet';// import 'leaflet/dist/leaflet.css';\nimport'leaflet-draw/dist/leaflet.draw.css';import{EditControl}from'react-leaflet-draw';import'leaflet-draw';import{connect}from\"react-redux\";import{firestoreConnect,firebaseConnect}from\"react-redux-firebase\";import{compose}from\"redux\";import{useSelector,useDispatch}from\"react-redux\";import{addLatLng as _addLatLng,addLatLngs as _addLatLngs,addCircle as _addCircle}from\"../../store/actions/addLatLng\";import{iconPerson}from'./PersonMarker';import{useFirestoreConnect,useFirebaseConnect,useFirestore,useFirebase}from\"react-redux-firebase\";import{DivIcon,marker,useMap,Marker,Popup}from'leaflet';import L from'leaflet';import Control from'react-leaflet-control';import personMarker from\"../../img/personmarker.svg\";import ambulance from\"./icons/ambulance.png\";import hospital from\"./icons/hospital.png\";import policecar from\"./icons/policecar.png\";import firetruck from\"./icons/firetruck2.png\";import bus from\"./icons/bus.jpg\";import car from\"./icons/car.jpg\";import roadblock from\"./icons/Roadblock.png\";import{DriftMarker}from\"leaflet-drift-marker\";import AnimatedMarker from\"./AnimatedMarker\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var roadblockIcon=L.icon({iconUrl:roadblock,iconSize:[20,40],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var personIcon=L.icon({iconUrl:personMarker,iconSize:[38,95],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var ambulanceIcon=L.icon({iconUrl:ambulance,iconSize:[30,50],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var hospitalIcon=L.icon({iconUrl:hospital,iconSize:[30,50],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var policecarIcon=L.icon({iconUrl:policecar,iconSize:[30,50],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var firetruckIcon=L.icon({iconUrl:firetruck,iconSize:[30,50],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var busIcon=L.icon({iconUrl:bus,iconSize:[30,50],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var carIcon=L.icon({iconUrl:car,iconSize:[30,50],// size of the icon\nshadowAnchor:[4,62],// the same for the shadow\npopupAnchor:[-3,-76]// \n});var MapView=function MapView(props){var mapRef=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),editableFG=_useState2[0],setEditableFG=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),latLng=_useState4[0],setLatLng=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),mapLayers=_useState6[0],setMapLayers=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),map=_useState8[0],setMap=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),markers=_useState10[0],setMarkers=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),markerType=_useState12[0],setMarkerType=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),markerSelected=_useState14[0],setMarkerSelected=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),defaultIcon=_useState16[0],setDefaultIcon=_useState16[1];var disasterCount=0;var delMarker=false;var _onCreated=function _onCreated(e){var drawnItems=editableFG.leafletElement._layers;var layer=e.layer;var drawedCord=e.layer.toGeoJSON().geometry.coordinates;var radius=e.layer.toGeoJSON();var layerType=e.layerType;if(Object.keys(drawnItems).length>1){Object.keys(drawnItems).forEach(function(layerid,index){if(index>0)return;var layer=drawnItems[layerid];editableFG.leafletElement.removeLayer(layer);});console.log(drawnItems);}if(e.layerType==\"rectangle\"){// console.log(layer.getLatLngs())\nvar latLngs=layer.getLatLngs();var latLngsArr=[];Object.keys(latLngs[0]).forEach(function(e,i){return latLngsArr.push([latLngs[0][e].lat,latLngs[0][e].lng]);});console.log(\"These are the Lngs and Lat\",latLngsArr);var coordinates={'coordinates':latLngsArr};props.addLatLngs(coordinates,disasterCount);disasterCount=disasterCount+1;}if(e.layerType==\"circle\"){console.log(layer._latlng);console.log(layer._mRadius);props.addCircle(layer._latlng,layer._mRadius,\"Active\");//    props.addLatLng({\"Latitude\":lat, \"Longitude\" : lng})\n}};var onFeatureGroupReady=function onFeatureGroupReady(reactFGref){// store the ref for future access to content\nsetEditableFG(reactFGref);};var handleClick=function handleClick(e){// console.log(instance.fireStore);\nvar _e$latlng=e.latlng,lat=_e$latlng.lat,lng=_e$latlng.lng;console.log(lat,lng);// firebase.ref(\"poi\").set(latLng)\n// markers.push((lat, lng, markerType))\n// setMarkers(markers)\nvar map=mapRef.current.leafletElement;console.log(\"Marker Selected is\",defaultIcon);if(defaultIcon!=null){var _marker=L.marker(e.latlng,{icon:defaultIcon});map.addLayer(_marker);var curMarkerType=markerType;var currMarker=[curMarkerType,_marker];setMarkers(markers.concat([[markerType,_marker]]));// setMarkers(markers.push([ markerType, marker]))\nconsole.log(markers);}props.addLatLng({\"Latitude\":lat,\"Longitude\":lng});};// const markerOnClick = (e) => {\n//    let map = mapRef.current.leafletElement;\n//    console.log(map)\n//    L.marker([53.335229447516774, -6.269385586492718], {icon:ambulanceIcon}).addTo(map)\n// }\nvar selectHandler=function selectHandler(e){var selected=document.getElementById(\"markerdropdown\").value;setMarkerType(document.getElementById('markerdropdown')[document.getElementById('markerdropdown').selectedIndex].innerHTML);if(selected==1){setDefaultIcon(null);}if(selected==2){setDefaultIcon(ambulanceIcon);}if(selected==3){setDefaultIcon(firetruckIcon);}if(selected==4){setDefaultIcon(policecarIcon);}if(selected==5){setDefaultIcon(hospitalIcon);}if(selected==6){setDefaultIcon(busIcon);}if(selected==7){setDefaultIcon(carIcon);}if(selected==8){console.log(\"setting default icon\");setDefaultIcon(personIcon);}if(selected==9){setDefaultIcon(roadblockIcon);}};function reverseCoord(coords){console.log(coords);var coordsNew=[];coords.forEach(function(coord){coordsNew.push([coord[1],coord[0]]);});return coordsNew;}function deleteMarker(e){if(delMarker==false){delMarker=true;}else if(delMarker==true){delMarker=false;}}function deleteMakrerHandler(e){console.log(e);var map=mapRef.current.leafletElement;var selected=document.getElementById(\"deletemarker\").value;if(markers.length==1){map.removeLayer(markers[0][1]);setMarkers([]);}if(markers.lenght!=0&&selected!=0){var _markerType=markers[selected][1];map.removeLayer(markers[selected][1]);setMarkers(markers.filter(function(m){return m[1]!=_markerType;}));}}useEffect(function(){// Update the document title using the browser API\nvar map=mapRef.current.leafletElement;var hospitalMakers=[[53.33925098,-6.29706676],[53.29108525,-6.378797956],[53.31617842,-6.213683926],[53.29303003,-6.136440217],[53.35892378,-6.2656689],[53.38819173,-6.369721092],[53.39092162,-6.223907]];hospitalMakers.forEach(function(m){return L.marker(m,{icon:hospitalIcon}).addTo(map);});var coordinates=[[-6.31289,53.3268],[-6.31213,53.32696],[-6.31146,53.32711],[-6.31058,53.3273],[-6.30918,53.3276],[-6.30912,53.32761],[-6.30873,53.3277],[-6.30789,53.32788],[-6.30754,53.32796],[-6.30733,53.328],[-6.30622,53.32824],[-6.30609,53.32827],[-6.3049,53.32852],[-6.3043,53.32866],[-6.30357,53.32882],[-6.30338,53.32886],[-6.30319,53.3289],[-6.30268,53.32901],[-6.30224,53.32911],[-6.30206,53.32915],[-6.30127,53.32933],[-6.30123,53.32934],[-6.30088,53.32941],[-6.29977,53.32966],[-6.29954,53.32971],[-6.29921,53.32978],[-6.29893,53.32985],[-6.29869,53.32992],[-6.29858,53.32995],[-6.29838,53.33004],[-6.2983,53.33008],[-6.29819,53.33013],[-6.29748,53.33042],[-6.29713,53.33055],[-6.2971,53.33056],[-6.29655,53.3308],[-6.29624,53.33092],[-6.29594,53.33103],[-6.29542,53.33124],[-6.29475,53.3315],[-6.29438,53.33165],[-6.29415,53.33174],[-6.29391,53.33184],[-6.29386,53.33185],[-6.29377,53.33193],[-6.29363,53.33202],[-6.29353,53.33208],[-6.29344,53.33213],[-6.29319,53.33229],[-6.293,53.33242],[-6.29275,53.33259],[-6.2922,53.33297],[-6.29192,53.33316],[-6.2914,53.33352],[-6.29097,53.3338],[-6.29093,53.33383],[-6.29072,53.33396],[-6.29058,53.33405],[-6.29038,53.33416],[-6.29018,53.33428],[-6.29006,53.33439],[-6.29001,53.33443],[-6.28993,53.33459],[-6.28992,53.3346],[-6.28967,53.3351],[-6.28956,53.33533],[-6.28947,53.33547],[-6.2893,53.33567],[-6.28905,53.33589],[-6.28901,53.33592],[-6.28883,53.33605],[-6.28856,53.33621],[-6.28779,53.33661],[-6.28725,53.33685],[-6.28646,53.33718],[-6.28625,53.33727],[-6.28575,53.33745],[-6.28554,53.33751],[-6.28525,53.3376],[-6.28479,53.33771],[-6.28472,53.33773],[-6.28449,53.33779],[-6.28429,53.33784],[-6.2839,53.33791],[-6.2835,53.33797],[-6.28271,53.3381],[-6.28221,53.33815],[-6.28184,53.33819],[-6.28182,53.33819],[-6.28146,53.33824],[-6.2813,53.33826],[-6.28064,53.33834],[-6.28011,53.33846],[-6.27948,53.33866],[-6.27972,53.33898],[-6.27981,53.33911],[-6.27999,53.33935],[-6.27946,53.33958],[-6.27908,53.33972],[-6.27893,53.33976],[-6.2786,53.33981],[-6.27821,53.33984],[-6.27802,53.33984],[-6.27804,53.33993],[-6.27806,53.34017],[-6.27811,53.3403],[-6.27813,53.34037],[-6.27823,53.34055],[-6.27838,53.34085],[-6.27858,53.3412],[-6.27862,53.34128],[-6.27879,53.34161],[-6.27911,53.34223],[-6.27915,53.3424],[-6.27916,53.34256],[-6.27912,53.34281],[-6.2785,53.34279],[-6.27818,53.34279],[-6.27797,53.34279],[-6.27775,53.34279],[-6.27742,53.34282],[-6.27718,53.34287],[-6.2771,53.34288],[-6.27692,53.34292],[-6.27617,53.34307],[-6.27606,53.34313],[-6.27598,53.34315],[-6.27581,53.34319],[-6.2758,53.34324],[-6.27544,53.34348],[-6.27539,53.34351],[-6.27565,53.34364],[-6.27587,53.34379],[-6.27598,53.34384],[-6.27603,53.34388],[-6.27622,53.34403],[-6.27633,53.34415],[-6.27636,53.34428],[-6.27627,53.34459],[-6.27609,53.34493],[-6.276,53.34508],[-6.27587,53.34528],[-6.27584,53.34532],[-6.27575,53.34554],[-6.27567,53.34573],[-6.27564,53.34578],[-6.27558,53.34588],[-6.2755,53.34605],[-6.27528,53.34645],[-6.27509,53.34698],[-6.27507,53.34705],[-6.27506,53.34707],[-6.27505,53.34708],[-6.27505,53.3471],[-6.27495,53.3473],[-6.27486,53.34748],[-6.27481,53.34778],[-6.27477,53.348],[-6.27476,53.34831],[-6.27473,53.34863],[-6.27472,53.34879],[-6.27471,53.34919],[-6.27469,53.3495],[-6.27468,53.34957],[-6.27466,53.34985],[-6.27461,53.34998],[-6.27454,53.35014],[-6.27438,53.35014],[-6.27376,53.35015],[-6.2736,53.35016],[-6.27321,53.35017],[-6.27285,53.35019],[-6.27246,53.35024],[-6.27231,53.35026],[-6.27197,53.35031],[-6.27163,53.35037],[-6.27123,53.35047],[-6.27089,53.35058],[-6.27059,53.35071],[-6.27036,53.35085],[-6.27007,53.35107],[-6.26985,53.35127],[-6.26981,53.35131],[-6.26978,53.35135],[-6.26914,53.35206],[-6.26904,53.35217],[-6.2684,53.35286],[-6.26837,53.35289],[-6.26834,53.35292],[-6.26806,53.35317],[-6.26694,53.3542],[-6.26652,53.3546],[-6.26639,53.35473],[-6.26613,53.35501],[-6.26587,53.3553],[-6.26569,53.35552],[-6.26533,53.35592],[-6.26526,53.35602],[-6.26515,53.35613],[-6.26469,53.35663],[-6.26457,53.35676],[-6.26455,53.35678],[-6.26446,53.35687],[-6.26429,53.35703],[-6.26413,53.3572],[-6.26398,53.35736],[-6.26391,53.35751],[-6.26323,53.35805],[-6.26274,53.35845],[-6.26204,53.35903],[-6.26175,53.35933],[-6.26132,53.35976],[-6.26125,53.35985],[-6.26052,53.36061],[-6.26047,53.36066],[-6.26037,53.36076],[-6.26004,53.36113],[-6.2599,53.36126],[-6.25974,53.36138],[-6.25972,53.36141],[-6.25962,53.36154],[-6.25961,53.36155],[-6.25958,53.36158],[-6.25951,53.36167],[-6.2595,53.36169],[-6.25949,53.36175],[-6.25936,53.36189],[-6.25881,53.3625],[-6.25852,53.36282],[-6.25844,53.36285],[-6.25827,53.36301],[-6.25791,53.36342],[-6.25777,53.36357],[-6.25759,53.36376],[-6.25742,53.36394],[-6.25719,53.3642],[-6.25711,53.36429],[-6.25677,53.36472],[-6.25648,53.36508],[-6.25618,53.36547],[-6.2559,53.3659],[-6.25575,53.36613],[-6.25555,53.36649],[-6.25549,53.36678],[-6.25547,53.36693],[-6.25546,53.36705],[-6.25546,53.36714],[-6.25546,53.36719],[-6.25546,53.36727],[-6.25547,53.36749],[-6.25547,53.36755],[-6.25546,53.36762],[-6.25544,53.36769],[-6.25524,53.3682],[-6.25519,53.3683],[-6.25519,53.36831],[-6.25515,53.3684],[-6.255,53.36875],[-6.25492,53.36887],[-6.2549,53.3689],[-6.25482,53.36903]];var newCoorinates=reverseCoord(coordinates);var firstpolyline=new L.Polyline(newCoorinates,{color:'red',weight:10,opacity:0.5,smoothFactor:1});firstpolyline.addTo(map);var line=L.polyline(newCoorinates),animatedMarker=L.animatedMarker(line.getLatLngs(),{icon:ambulanceIcon});map.addLayer(animatedMarker);});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Map,{ref:mapRef,center:[53.3498,-6.2603],zoom:12,style:{height:'91vh'},onclick:handleClick,whenCreated:setMap,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"Powered by <a href=\\\"https://www.esri.com\\\">Esri</a>\",url:\"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"}),/*#__PURE__*/_jsx(FeatureGroup,{ref:function ref(featureGroupRef){onFeatureGroupReady(featureGroupRef);},children:/*#__PURE__*/_jsx(EditControl,{style:{color:\"red\"},draw:{circle:{shapeOptions:{color:\"red\"},showLength:true,metric:true,feet:true,showArea:true},polyline:{shapeOptions:{color:\"red\"}},polygone:{shapeOptions:{color:\"red\"}},rectangle:{shapeOptions:{color:\"red\"}},// marker: false,\ncirclemarker:false},position:\"topright\",onCreated:_onCreated})}),/*#__PURE__*/_jsxs(Control,{position:\"bottomleft\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:selectHandler,id:\"markerdropdown\",className:\"browser-default\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,selected:true,children:\"Select Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Ambulance Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Firetruck Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Police Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"Hospital Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"6\",children:\"Bus Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"7\",children:\"Car Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"8\",children:\"Person Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"9\",children:\"RoadBlock Marker\"})]}),/*#__PURE__*/_jsx(\"label\",{})]}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteMarker,children:\"Delete Marker\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:deleteMakrerHandler,id:\"deletemarker\",className:\"browser-default\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,selected:true,children:\"Delete Marker\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\"}),markers&&markers.map(function(m,i){return/*#__PURE__*/_jsx(\"option\",{value:i,children:i+1+\" \"+m[0]});})]}),/*#__PURE__*/_jsx(\"label\",{})]})]})]})});};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{addLatLng:function addLatLng(latLng){return dispatch(_addLatLng(latLng));},addLatLngs:function addLatLngs(latLngs,count){return dispatch(_addLatLngs(latLngs,count));},addCircle:function addCircle(latLngs,type,status){return dispatch(_addCircle(latLngs,type,status));}};};export default connect(null,mapDispatchToProps)(MapView);","map":{"version":3,"sources":["C:/Users/sherwin/projects/ASE Project/LatestClientCoordinator/disastercoordinatorwebview/src/components/Mapping/MapView.js"],"names":["React","useState","useEffect","useCallback","useRef","Map","TileLayer","FeatureGroup","EditControl","connect","firestoreConnect","firebaseConnect","compose","useSelector","useDispatch","addLatLng","addLatLngs","addCircle","iconPerson","useFirestoreConnect","useFirebaseConnect","useFirestore","useFirebase","DivIcon","marker","useMap","Marker","Popup","L","Control","ambulance","hospital","policecar","firetruck","bus","car","roadblock","DriftMarker","AnimatedMarker","roadblockIcon","icon","iconUrl","iconSize","shadowAnchor","popupAnchor","personIcon","personMarker","ambulanceIcon","hospitalIcon","policecarIcon","firetruckIcon","busIcon","carIcon","MapView","props","mapRef","editableFG","setEditableFG","latLng","setLatLng","mapLayers","setMapLayers","map","setMap","markers","setMarkers","markerType","setMarkerType","markerSelected","setMarkerSelected","defaultIcon","setDefaultIcon","disasterCount","delMarker","_onCreated","e","drawnItems","leafletElement","_layers","layer","drawedCord","toGeoJSON","geometry","coordinates","radius","layerType","Object","keys","length","forEach","layerid","index","removeLayer","console","log","latLngs","getLatLngs","latLngsArr","i","push","lat","lng","_latlng","_mRadius","onFeatureGroupReady","reactFGref","handleClick","latlng","current","addLayer","curMarkerType","currMarker","concat","selectHandler","selected","document","getElementById","value","selectedIndex","innerHTML","reverseCoord","coords","coordsNew","coord","deleteMarker","deleteMakrerHandler","lenght","filter","m","hospitalMakers","addTo","newCoorinates","firstpolyline","Polyline","color","weight","opacity","smoothFactor","line","polyline","animatedMarker","height","featureGroupRef","circle","shapeOptions","showLength","metric","feet","showArea","polygone","rectangle","circlemarker","mapDispatchToProps","dispatch","count","type","status"],"mappings":"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","sourcesContent":["\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { Map, TileLayer, FeatureGroup } from 'react-leaflet';\r\n// import 'leaflet/dist/leaflet.css';\r\n\r\nimport 'leaflet-draw/dist/leaflet.draw.css';\r\nimport { EditControl } from 'react-leaflet-draw';\r\nimport 'leaflet-draw';\r\nimport {connect} from \"react-redux\";\r\nimport {firestoreConnect, firebaseConnect} from \"react-redux-firebase\";\r\nimport {compose} from \"redux\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { addLatLng, addLatLngs, addCircle } from \"../../store/actions/addLatLng\";\r\nimport {iconPerson} from './PersonMarker'\r\nimport { useFirestoreConnect, useFirebaseConnect, useFirestore, useFirebase } from \"react-redux-firebase\";\r\nimport { DivIcon, marker, useMap , Marker, Popup} from 'leaflet';\r\nimport L from 'leaflet';\r\nimport Control from 'react-leaflet-control';\r\nimport personMarker from \"../../img/personmarker.svg\"\r\nimport ambulance from \"./icons/ambulance.png\"\r\nimport hospital from \"./icons/hospital.png\"\r\nimport policecar from \"./icons/policecar.png\"\r\nimport firetruck from \"./icons/firetruck2.png\"\r\nimport bus from \"./icons/bus.jpg\"\r\nimport car from \"./icons/car.jpg\"\r\nimport roadblock from \"./icons/Roadblock.png\"\r\nimport { DriftMarker } from \"leaflet-drift-marker\";\r\nimport AnimatedMarker from \"./AnimatedMarker\"\r\n\r\n\r\nlet roadblockIcon = L.icon({\r\n  iconUrl: roadblock,\r\n  iconSize:     [20, 40], // size of the icon\r\n  shadowAnchor: [4, 62],  // the same for the shadow\r\n  popupAnchor:  [-3, -76]// \r\n\r\n});\r\n\r\n\r\n\r\nlet personIcon = L.icon({\r\n    iconUrl: personMarker,\r\n    iconSize:     [38, 95], // size of the icon\r\n    shadowAnchor: [4, 62],  // the same for the shadow\r\n    popupAnchor:  [-3, -76]// \r\n\r\n  });\r\n\r\n\r\nlet ambulanceIcon = L.icon({\r\n    iconUrl: ambulance,\r\n    iconSize:     [30, 50], // size of the icon\r\n    shadowAnchor: [4, 62],  // the same for the shadow\r\n    popupAnchor:  [-3, -76]// \r\n\r\n  });\r\n\r\n  let hospitalIcon = L.icon({\r\n    iconUrl: hospital,\r\n    iconSize:     [30, 50], // size of the icon\r\n    shadowAnchor: [4, 62],  // the same for the shadow\r\n    popupAnchor:  [-3, -76]// \r\n\r\n  });\r\n\r\n  let policecarIcon = L.icon({\r\n    iconUrl: policecar,\r\n    iconSize:     [30, 50], // size of the icon\r\n    shadowAnchor: [4, 62],  // the same for the shadow\r\n    popupAnchor:  [-3, -76]// \r\n\r\n  });\r\n  let firetruckIcon = L.icon({\r\n    iconUrl: firetruck,\r\n    iconSize:     [30, 50], // size of the icon\r\n    shadowAnchor: [4, 62],  // the same for the shadow\r\n    popupAnchor:  [-3, -76]// \r\n\r\n  });\r\n  let busIcon = L.icon({\r\n    iconUrl: bus,\r\n    iconSize:     [30, 50], // size of the icon\r\n    shadowAnchor: [4, 62],  // the same for the shadow\r\n    popupAnchor:  [-3, -76]// \r\n\r\n  });\r\n  let carIcon = L.icon({\r\n    iconUrl: car,\r\n    iconSize:     [30, 50], // size of the icon\r\n    shadowAnchor: [4, 62],  // the same for the shadow\r\n    popupAnchor:  [-3, -76]// \r\n\r\n  });\r\n \r\n\r\n\r\nconst MapView = (props) => {\r\n   const mapRef = useRef()\r\n\r\n    const [editableFG, setEditableFG] = useState(null);\r\n    const [ latLng, setLatLng] = useState(null);\r\n    const [mapLayers, setMapLayers] = useState([]);\r\n    const [map, setMap] = useState(null);\r\n    const [markers, setMarkers]= useState([])\r\n    const [markerType , setMarkerType] = useState(null)\r\n    const [markerSelected, setMarkerSelected] = useState(false)\r\n    const [defaultIcon, setDefaultIcon] = useState(null)\r\n     \r\n\r\n    let disasterCount = 0\r\n    let delMarker = false\r\n\r\n    const _onCreated = e => {\r\n    \r\n        const drawnItems = editableFG.leafletElement._layers;\r\n\r\n        var layer = e.layer;\r\n\r\n        var drawedCord = e.layer.toGeoJSON().geometry.coordinates;\r\n        var radius = e.layer.toGeoJSON()\r\n        const {layerType } = e;\r\n      \r\n\r\n\r\n\r\n        if (Object.keys(drawnItems).length > 1) {\r\n            Object.keys(drawnItems).forEach((layerid, index) => {\r\n                if (index > 0) return;\r\n                const layer = drawnItems[layerid];\r\n                editableFG.leafletElement.removeLayer(layer);\r\n            });\r\n            console.log(drawnItems);\r\n        }\r\n  \r\n\r\n       if(e.layerType ==\"rectangle\"){\r\n            // console.log(layer.getLatLngs())\r\n            let latLngs = layer.getLatLngs()\r\n            let latLngsArr = []\r\n\r\n            Object.keys(latLngs[0]).forEach((e,i) => latLngsArr.push([latLngs[0][e].lat, latLngs[0][e].lng]))\r\n            console.log(\"These are the Lngs and Lat\", latLngsArr)\r\n\r\n            let coordinates = {'coordinates': latLngsArr}\r\n\r\n            props.addLatLngs(coordinates, disasterCount)\r\n            disasterCount = disasterCount +1;\r\n\r\n       }\r\n       if(e.layerType == \"circle\"){\r\n           console.log(layer._latlng)\r\n           console.log(layer._mRadius)\r\n           props.addCircle(layer._latlng, layer._mRadius, \"Active\")\r\n        //    props.addLatLng({\"Latitude\":lat, \"Longitude\" : lng})\r\n\r\n       }\r\n\r\n    };\r\n\r\n \r\n\r\n\r\n    const onFeatureGroupReady = reactFGref => {\r\n        // store the ref for future access to content\r\n        setEditableFG(reactFGref);\r\n    };\r\n\r\n\r\n    const handleClick = (e) => {\r\n        // console.log(instance.fireStore);\r\n        const { lat, lng } = e.latlng;\r\n\r\n\r\n        console.log(lat, lng);\r\n        // firebase.ref(\"poi\").set(latLng)\r\n        // markers.push((lat, lng, markerType))\r\n        // setMarkers(markers)\r\n\r\n       let map = mapRef.current.leafletElement;\r\n\r\n       console.log(\"Marker Selected is\", defaultIcon)\r\n    \r\n       if(defaultIcon != null){\r\n        let marker = L.marker(e.latlng, {icon:defaultIcon})\r\n        map.addLayer(marker)\r\n\r\n        const curMarkerType = markerType\r\n        let currMarker = [ curMarkerType, marker]\r\n       \r\n         setMarkers(markers.concat( [[markerType, marker]])) \r\n        // setMarkers(markers.push([ markerType, marker]))\r\n        console.log(markers)\r\n      \r\n       }\r\n        props.addLatLng({\"Latitude\":lat, \"Longitude\" : lng})\r\n\r\n      }\r\n\r\n    // const markerOnClick = (e) => {\r\n\r\n    //    let map = mapRef.current.leafletElement;\r\n    //    console.log(map)\r\n    //    L.marker([53.335229447516774, -6.269385586492718], {icon:ambulanceIcon}).addTo(map)\r\n    // }\r\n\r\n    const selectHandler = (e) => {\r\n        \r\n      let selected =   document.getElementById(\"markerdropdown\").value\r\n      setMarkerType(document.getElementById('markerdropdown')[document.getElementById('markerdropdown').selectedIndex].innerHTML)\r\n\r\n      if(selected == 1)\r\n      {\r\n        setDefaultIcon(null);\r\n      }\r\n      if(selected == 2)\r\n      {           \r\n           setDefaultIcon(ambulanceIcon);\r\n\r\n\r\n      }\r\n      if(selected == 3)\r\n      {\r\n        setDefaultIcon(firetruckIcon);\r\n\r\n\r\n      }\r\n      if(selected == 4)\r\n      {\r\n        setDefaultIcon(policecarIcon);\r\n\r\n\r\n      }\r\n      if(selected == 5)\r\n      {\r\n        setDefaultIcon(hospitalIcon);\r\n\r\n\r\n      }\r\n      if(selected == 6)\r\n      {\r\n        setDefaultIcon(busIcon);\r\n\r\n\r\n      }\r\n      if(selected == 7)\r\n      {\r\n            setDefaultIcon(carIcon);\r\n\r\n      }\r\n      if(selected == 8)\r\n      {\r\n            console.log(\"setting default icon\")\r\n            setDefaultIcon(personIcon);\r\n\r\n      }\r\n      if(selected == 9){\r\n        setDefaultIcon(roadblockIcon);\r\n      }\r\n    }\r\n\r\n\r\n    function reverseCoord(coords) {\r\n      console.log(coords)\r\n      var coordsNew = [];\r\n      coords.forEach(function (coord) {\r\n        coordsNew.push([coord[1], coord[0]]);\r\n      });\r\n      return coordsNew;\r\n    }\r\n\r\n    function deleteMarker(e){\r\n      if(delMarker == false){\r\n        delMarker = true\r\n      }\r\n      else if(delMarker == true){\r\n        delMarker = false\r\n      }\r\n    }\r\n\r\n    function deleteMakrerHandler(e){\r\n      console.log(e)\r\n      let map = mapRef.current.leafletElement;\r\n      let selected =   document.getElementById(\"deletemarker\").value\r\n      if(markers.length == 1){\r\n        map.removeLayer(markers[0][1])\r\n        setMarkers([])\r\n      }\r\n\r\n      if(markers.lenght != 0 && selected!=0){\r\n      let markerType = markers[selected][1]\r\n      map.removeLayer(markers[selected][1])\r\n      setMarkers(markers.filter((m)=> {return m[1]!=markerType;}))\r\n      }\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n      // Update the document title using the browser API\r\n            let map = mapRef.current.leafletElement;\r\n            let hospitalMakers = [[53.33925098,\t-6.29706676],[53.29108525\t,-6.378797956],[53.31617842\t,-6.213683926],[53.29303003\t,-6.136440217],[53.35892378\t,-6.2656689],[53.38819173\t,-6.369721092],[53.39092162\t,-6.223907]]\r\n\r\n            hospitalMakers.forEach((m)=>  L.marker(m, {icon:hospitalIcon}).addTo(map))    \r\n\r\n            let coordinates = [[-6.31289, 53.3268], [-6.31213, 53.32696], [-6.31146, 53.32711], [-6.31058, 53.3273], [-6.30918, 53.3276], [-6.30912, 53.32761], [-6.30873, 53.3277], [-6.30789, 53.32788], [-6.30754, 53.32796], [-6.30733, 53.328], [-6.30622, 53.32824], [-6.30609, 53.32827], [-6.3049, 53.32852], [-6.3043, 53.32866], [-6.30357, 53.32882], [-6.30338, 53.32886], [-6.30319, 53.3289], [-6.30268, 53.32901], [-6.30224, 53.32911], [-6.30206, 53.32915], [-6.30127, 53.32933], [-6.30123, 53.32934], [-6.30088, 53.32941], [-6.29977, 53.32966], [-6.29954, 53.32971], [-6.29921, 53.32978], [-6.29893, 53.32985], [-6.29869, 53.32992], [-6.29858, 53.32995], [-6.29838, 53.33004], [-6.2983, 53.33008], [-6.29819, 53.33013], [-6.29748, 53.33042], [-6.29713, 53.33055], [-6.2971, 53.33056], [-6.29655, 53.3308], [-6.29624, 53.33092], [-6.29594, 53.33103], [-6.29542, 53.33124], [-6.29475, 53.3315], [-6.29438, 53.33165], [-6.29415, 53.33174], [-6.29391, 53.33184], [-6.29386, 53.33185], [-6.29377, 53.33193], [-6.29363, 53.33202], [-6.29353, 53.33208], [-6.29344, 53.33213], [-6.29319, 53.33229], [-6.293, 53.33242], [-6.29275, 53.33259], [-6.2922, 53.33297], [-6.29192, 53.33316], [-6.2914, 53.33352], [-6.29097, 53.3338], [-6.29093, 53.33383], [-6.29072, 53.33396], [-6.29058, 53.33405], [-6.29038, 53.33416], [-6.29018, 53.33428], [-6.29006, 53.33439], [-6.29001, 53.33443], [-6.28993, 53.33459], [-6.28992, 53.3346], [-6.28967, 53.3351], [-6.28956, 53.33533], [-6.28947, 53.33547], [-6.2893, 53.33567], [-6.28905, 53.33589], [-6.28901, 53.33592], [-6.28883, 53.33605], [-6.28856, 53.33621], [-6.28779, 53.33661], [-6.28725, 53.33685], [-6.28646, 53.33718], [-6.28625, 53.33727], [-6.28575, 53.33745], [-6.28554, 53.33751], [-6.28525, 53.3376], [-6.28479, 53.33771], [-6.28472, 53.33773], [-6.28449, 53.33779], [-6.28429, 53.33784], [-6.2839, 53.33791], [-6.2835, 53.33797], [-6.28271, 53.3381], [-6.28221, 53.33815], [-6.28184, 53.33819], [-6.28182, 53.33819], [-6.28146, 53.33824], [-6.2813, 53.33826], [-6.28064, 53.33834], [-6.28011, 53.33846], [-6.27948, 53.33866], [-6.27972, 53.33898], [-6.27981, 53.33911], [-6.27999, 53.33935], [-6.27946, 53.33958], [-6.27908, 53.33972], [-6.27893, 53.33976], [-6.2786, 53.33981], [-6.27821, 53.33984], [-6.27802, 53.33984], [-6.27804, 53.33993], [-6.27806, 53.34017], [-6.27811, 53.3403], [-6.27813, 53.34037], [-6.27823, 53.34055], [-6.27838, 53.34085], [-6.27858, 53.3412], [-6.27862, 53.34128], [-6.27879, 53.34161], [-6.27911, 53.34223], [-6.27915, 53.3424], [-6.27916, 53.34256], [-6.27912, 53.34281], [-6.2785, 53.34279], [-6.27818, 53.34279], [-6.27797, 53.34279], [-6.27775, 53.34279], [-6.27742, 53.34282], [-6.27718, 53.34287], [-6.2771, 53.34288], [-6.27692, 53.34292], [-6.27617, 53.34307], [-6.27606, 53.34313], [-6.27598, 53.34315], [-6.27581, 53.34319], [-6.2758, 53.34324], [-6.27544, 53.34348], [-6.27539, 53.34351], [-6.27565, 53.34364], [-6.27587, 53.34379], [-6.27598, 53.34384], [-6.27603, 53.34388], [-6.27622, 53.34403], [-6.27633, 53.34415], [-6.27636, 53.34428], [-6.27627, 53.34459], [-6.27609, 53.34493], [-6.276, 53.34508], [-6.27587, 53.34528], [-6.27584, 53.34532], [-6.27575, 53.34554], [-6.27567, 53.34573], [-6.27564, 53.34578], [-6.27558, 53.34588], [-6.2755, 53.34605], [-6.27528, 53.34645], [-6.27509, 53.34698], [-6.27507, 53.34705], [-6.27506, 53.34707], [-6.27505, 53.34708], [-6.27505, 53.3471], [-6.27495, 53.3473], [-6.27486, 53.34748], [-6.27481, 53.34778], [-6.27477, 53.348], [-6.27476, 53.34831], [-6.27473, 53.34863], [-6.27472, 53.34879], [-6.27471, 53.34919], [-6.27469, 53.3495], [-6.27468, 53.34957], [-6.27466, 53.34985], [-6.27461, 53.34998], [-6.27454, 53.35014], [-6.27438, 53.35014], [-6.27376, 53.35015], [-6.2736, 53.35016], [-6.27321, 53.35017], [-6.27285, 53.35019], [-6.27246, 53.35024], [-6.27231, 53.35026], [-6.27197, 53.35031], [-6.27163, 53.35037], [-6.27123, 53.35047], [-6.27089, 53.35058], [-6.27059, 53.35071], [-6.27036, 53.35085], [-6.27007, 53.35107], [-6.26985, 53.35127], [-6.26981, 53.35131], [-6.26978, 53.35135], [-6.26914, 53.35206], [-6.26904, 53.35217], [-6.2684, 53.35286], [-6.26837, 53.35289], [-6.26834, 53.35292], [-6.26806, 53.35317], [-6.26694, 53.3542], [-6.26652, 53.3546], [-6.26639, 53.35473], [-6.26613, 53.35501], [-6.26587, 53.3553], [-6.26569, 53.35552], [-6.26533, 53.35592], [-6.26526, 53.35602], [-6.26515, 53.35613], [-6.26469, 53.35663], [-6.26457, 53.35676], [-6.26455, 53.35678], [-6.26446, 53.35687], [-6.26429, 53.35703], [-6.26413, 53.3572], [-6.26398, 53.35736], [-6.26391, 53.35751], [-6.26323, 53.35805], [-6.26274, 53.35845], [-6.26204, 53.35903], [-6.26175, 53.35933], [-6.26132, 53.35976], [-6.26125, 53.35985], [-6.26052, 53.36061], [-6.26047, 53.36066], [-6.26037, 53.36076], [-6.26004, 53.36113], [-6.2599, 53.36126], [-6.25974, 53.36138], [-6.25972, 53.36141], [-6.25962, 53.36154], [-6.25961, 53.36155], [-6.25958, 53.36158], [-6.25951, 53.36167], [-6.2595, 53.36169], [-6.25949, 53.36175], [-6.25936, 53.36189], [-6.25881, 53.3625], [-6.25852, 53.36282], [-6.25844, 53.36285], [-6.25827, 53.36301], [-6.25791, 53.36342], [-6.25777, 53.36357], [-6.25759, 53.36376], [-6.25742, 53.36394], [-6.25719, 53.3642], [-6.25711, 53.36429], [-6.25677, 53.36472], [-6.25648, 53.36508], [-6.25618, 53.36547], [-6.2559, 53.3659], [-6.25575, 53.36613], [-6.25555, 53.36649], [-6.25549, 53.36678], [-6.25547, 53.36693], [-6.25546, 53.36705], [-6.25546, 53.36714], [-6.25546, 53.36719], [-6.25546, 53.36727], [-6.25547, 53.36749], [-6.25547, 53.36755], [-6.25546, 53.36762], [-6.25544, 53.36769], [-6.25524, 53.3682], [-6.25519, 53.3683], [-6.25519, 53.36831], [-6.25515, 53.3684], [-6.255, 53.36875], [-6.25492, 53.36887], [-6.2549, 53.3689], [-6.25482, 53.36903]];\r\n            let newCoorinates = reverseCoord(coordinates);\r\n            var firstpolyline = new L.Polyline(newCoorinates, {\r\n              color: 'red',\r\n              weight: 10,\r\n              opacity: 0.5,\r\n              smoothFactor: 1\r\n            });\r\n\r\n            firstpolyline.addTo(map);\r\n\r\n            var line = L.polyline(newCoorinates),\r\n            animatedMarker = L.animatedMarker(line.getLatLngs(),  {\r\n              icon: ambulanceIcon\r\n            });\r\n            map.addLayer(animatedMarker);\r\n\r\n    \r\n    });\r\n\r\n    return (\r\n        <div>\r\n        <Map ref={mapRef}\r\n            center={[53.3498, -6.2603]}\r\n            zoom={12}\r\n            style={{ height: '91vh' }}\r\n            onclick = {handleClick} \r\n            whenCreated={setMap}\r\n\r\n            \r\n            >\r\n            {/* <TileLayer\r\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\"\r\n            /> */}\r\n                    <TileLayer\r\n          attribution=\"Powered by <a href=&quot;https://www.esri.com&quot;>Esri</a>\"\r\n          url=\"http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\r\n        />\r\n             \r\n            <FeatureGroup\r\n                ref={featureGroupRef => {\r\n                    onFeatureGroupReady(featureGroupRef);\r\n                }}>\r\n                <EditControl style={{color: \"red\"}} \r\n                        draw={{\r\n                                    circle: {\r\n                                        shapeOptions: { color: \"red\" },\r\n                                        showLength: true,\r\n                                        metric: true,\r\n                                        feet: true,\r\n                                        showArea: true\r\n                                    },\r\n                                    polyline: { \r\n                                        shapeOptions: { color: \"red\" } \r\n                                    },\r\n                                    polygone: { \r\n                                        shapeOptions: { color: \"red\" } \r\n                                    },\r\n                                    rectangle: { \r\n                                        shapeOptions: { color: \"red\" } \r\n                                    },\r\n                                \r\n                                    \r\n\r\n                                    // marker: false,\r\n                                    circlemarker:false\r\n\r\n                            }}\r\n                                \r\n                        position=\"topright\" onCreated={_onCreated} />\r\n            </FeatureGroup>\r\n         \r\n    \r\n            <Control position=\"bottomleft\" >\r\n                    {/* <button \r\n                    onClick={ markerOnClick }\r\n                    >\r\n                    Person Marker\r\n                    </button>\r\n                     */}\r\n\r\n                     <div className=\"input-field col s12\">\r\n                        <select onChange = {selectHandler} id =\"markerdropdown\" className=\"browser-default\">\r\n                            <option  value=\"\" disabled selected>Select Marker</option>\r\n                            <option value=\"1\"></option>\r\n                            <option value=\"2\">Ambulance Marker</option>\r\n                            <option value=\"3\">Firetruck Marker</option>\r\n                            <option value=\"4\">Police Marker</option>\r\n                            <option value=\"5\">Hospital Marker</option>\r\n                            <option value=\"6\">Bus Marker</option>\r\n                            <option value=\"7\">Car Marker</option>\r\n                            <option value=\"8\">Person Marker</option>\r\n                            <option value=\"9\">RoadBlock Marker</option>\r\n\r\n                        </select>\r\n                        <label></label>\r\n\r\n                        </div>\r\n                        <button onClick ={deleteMarker}>Delete Marker</button>\r\n                        \r\n                     <div className=\"input-field col s12\">\r\n                        <select onChange = {deleteMakrerHandler} id =\"deletemarker\" className=\"browser-default\">\r\n                            <option  value=\"\" disabled selected>Delete Marker</option>\r\n                            <option value=\"0\"></option>\r\n\r\n                             {markers && markers.map((m, i)=> \r\n                              <option value={i}>{ (i+1) + \" \" + m[0]}</option>\r\n                            )}\r\n                            \r\n                            \r\n\r\n                        </select>\r\n                        <label></label>\r\n\r\n                        </div>\r\n\r\n            </Control>\r\n    \r\n        </Map>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        addLatLng: (latLng) => dispatch(addLatLng(latLng)),\r\n        addLatLngs: (latLngs, count)=> dispatch(addLatLngs(latLngs, count)),\r\n        addCircle: (latLngs,type, status)=> dispatch(addCircle(latLngs, type,status))\r\n\r\n    }\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(MapView);\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}